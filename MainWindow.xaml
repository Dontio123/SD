<Window x:Class="ShelfMaster.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ShelfMaster"
        xmlns:converters="clr-namespace:ShelfMaster.Converters"
        mc:Ignorable="d"
        Title="Login"
        Height="550"
        Width="900"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        ResizeMode="CanResize"
        Background="Transparent"
        AllowsTransparency="True">

    <Window.Resources>
        <converters:StringToVisibilityConverter x:Key="StringToVisibilityConverter"/>
        <DropShadowEffect x:Key="ModernShadow"
                          BlurRadius="25"
                          ShadowDepth="5"
                          Color="#20000000"
                          Opacity="0.3"/>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="1.5*"/>
        </Grid.ColumnDefinitions>

        <!-- Window Control Buttons (Minimize, Fullscreen, Close) -->
        <StackPanel Grid.Column="1"
                    Panel.ZIndex="10"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Margin="0,10,10,0">
            <Button Click="MinimizeButton_Click"
                    Width="30" Height="30"
                    Background="Transparent"
                    BorderThickness="0"
                    Cursor="Hand"
                    Margin="0,0,10,0"
                    ToolTip="Minimize">
                <Image Source="/Images/minimize.png" Stretch="Uniform"/>
            </Button>
            <Button Click="FullscreenButton_Click"
                    Width="30" Height="30"
                    Background="Transparent"
                    BorderThickness="0"
                    Cursor="Hand"
                    Margin="0,0,10,0"
                    ToolTip="Toggle Fullscreen">
                <Image Source="/Images/fullscreen.png" Stretch="Uniform"/>
            </Button>
            <Button Click="CloseButton_Click"
                    Width="30" Height="30"
                    Background="Transparent"
                    BorderThickness="0"
                    Cursor="Hand"
                    ToolTip="Close">
                <Image Source="/Images/close.png" Stretch="Uniform"/>
            </Button>
        </StackPanel>

        <!-- Left Side - Branding & Decorative Background -->
        <Border Grid.Column="0"
                Background="{DynamicResource cs_Background}"
                CornerRadius="20,0,0,20">
            <Grid>
                <!-- Decorative Shapes -->
                <Canvas Opacity="0.15">
                    <Polygon Points="0,20 230,140 0,270" Fill="White"/>
                    <Polygon Points="100,400 200,370 100,470" Fill="White" Canvas.Left="60" Canvas.Top="-12"/>
                    <Ellipse Width="50" Height="50" Fill="White" Canvas.Left="250" Canvas.Top="450"/>
                    <Ellipse Width="25" Height="25" Fill="White" Canvas.Left="50" Canvas.Top="400"/>
                </Canvas>

                <!-- Branding Content -->
                <StackPanel VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            Margin="40">
                    <Image Source="/Images/SD_Logo-removebg-preview.png"
                           Width="120" Height="120"
                           Margin="0,0,0,20"/>
                    <TextBlock Text="ShelfMaster"
                               FontSize="36"
                               Foreground="White"
                               FontWeight="SemiBold"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,10"/>
                    <TextBlock Text="Library Management System"
                               FontSize="16"
                               Foreground="White"
                               Opacity="0.9"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,30"/>
                    <TextBlock Text="A comprehensive digital platform designed to streamline and centralize all aspects of library management. Efficiently manage book cataloging, patron records, circulation transactions, and administrative functions in a secure, user-friendly environment."
                               Foreground="White"
                               Opacity="0.85"
                               FontSize="14"
                               TextWrapping="Wrap"
                               TextAlignment="Center"
                               MaxWidth="300"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Right Side - Login Form -->
        <Border Grid.Column="1"
                Background="White"
                CornerRadius="0,20,20,0"
                Effect="{StaticResource ModernShadow}"
                MouseDown="Border_MouseDown">
            <StackPanel VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        Margin="60,40">
                <!-- Title -->
                <TextBlock Text="Welcome Back"
                           FontSize="32"
                           FontWeight="Bold"
                           Foreground="#1a1a1a"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,5"/>
                <TextBlock Text="Sign in to continue"
                           FontSize="15"
                           Foreground="#666666"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,40"/>

                <!-- University Logos -->
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center"
                            Margin="0,0,0,30">
                    <Button Style="{StaticResource buttonCircle}" Margin="10">
                        <Image Source="/Images/wmsu.png" Width="50" Height="50"/>
                    </Button>
                    <Button Style="{StaticResource buttonCircle}" Margin="10">
                        <Image Source="/Images/englogo.png" Width="50" Height="50"/>
                    </Button>
                </StackPanel>

                <!-- Error Message -->
                <Border x:Name="ErrorBorder"
                        Background="#FFEBEE"
                        BorderBrush="#F44336"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="12,8"
                        Margin="0,0,0,15"
                        Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}">
                    <TextBlock Text="{Binding ErrorMessage}"
                               Foreground="#C62828"
                               FontSize="13"
                               TextWrapping="Wrap"
                               HorizontalAlignment="Center"/>
                </Border>

                <!-- Email Field -->
                <Border BorderThickness="1.5"
                        BorderBrush="#E0E0E0"
                        Background="White"
                        CornerRadius="10"
                        Margin="0,0,0,12">
                    <Grid Margin="12,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Image Source="/Images/email.png"
                               Height="22"
                               VerticalAlignment="Center"/>
                        <TextBlock x:Name="textEmail"
                                   Grid.Column="1"
                                   Text="Email"
                                   Style="{StaticResource textHint}"
                                   MouseDown="TxtEmail_MouseDown"/>
                        <TextBox x:Name="txtEmail"
                                 Grid.Column="1"
                                 FontSize="15"
                                 Padding="4,0"
                                 Style="{StaticResource textBox}"
                                 TextChanged="TxtEmail_TextChanged"
                                 KeyDown="TextBox_KeyDown"/>
                    </Grid>
                </Border>

                <!-- Password Field -->
                <Border BorderThickness="1.5"
                        BorderBrush="#E0E0E0"
                        Background="White"
                        CornerRadius="10"
                        Margin="0,0,0,20">
                    <Grid Margin="12,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Image Source="/Images/padlock.png"
                               Height="22"
                               VerticalAlignment="Center"/>
                        <TextBlock x:Name="textPassword"
                                   Grid.Column="1"
                                   Text="Password"
                                   Style="{StaticResource textHint}"
                                   MouseDown="TextPassword_MouseDown"/>
                        <PasswordBox x:Name="txtPassword"
                                     Grid.Column="1"
                                     FontSize="15"
                                     Padding="4,0"
                                     Style="{StaticResource textBox}"
                                     PasswordChanged="TxtPassword_TextChanged"
                                     KeyDown="PasswordBox_KeyDown"/>
                    </Grid>
                </Border>

                <!-- Sign In Button -->
                <Button Content="Sign In"
                        Click="LoginButton_Click"
                        Style="{StaticResource mainbutton}"
                        FontSize="16"
                        FontWeight="SemiBold"
                        Height="50"
                        Width="280"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>